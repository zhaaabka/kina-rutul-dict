<h1>{{ title }}</h1>

{% for p in paragraphs %}
<p>{{ p }}</p>
{% endfor %}

<p>
  <a class="btn btn-outline-success"
     href="{{ base_url }}dictionary.html">
    Browse the dictionary
  </a>
</p>
<p>
  <a class="btn btn-outline-success"
     href="{{ base_url }}search.html">
    Full search
  </a>
</p>

<hr>

<div class="cite-block">
  <h2>{{ bibtex_title }}</h2>

  <div class="tabs">
    <button class="btn btn-outline-success active"
            onclick="showTab('plain')">
      Plain text
    </button>
    <button class="btn btn-outline-success"
            onclick="showTab('bibtex')">
      BibTeX
    </button>
  </div>

  <div class="tab-content">

  <div id="plain" class="cite-content active">
    <button class="copy-btn"
            onclick="copyCitation('plain', this)">
      Copy
    </button>
    <pre>{{ citation_text | safe}}</pre>
  </div>

  <div id="bibtex" class="cite-content">
    <button class="copy-btn"
            onclick="copyCitation('bibtex', this)">
      Copy
    </button>
    <pre>{{ citation_bibtex | safe}}</pre>
  </div>

</div>

</div>

<script>
function showTab(name) {
  document.querySelectorAll('.tab').forEach(tab =>
    tab.classList.remove('active')
  );

  document.querySelectorAll('.cite-content').forEach(block =>
    block.classList.remove('active')
  );

  document.getElementById(name).classList.add('active');
  event.target.classList.add('active');
}

function copyCitation(id, button) {
  const text = document
    .querySelector('#' + id + ' pre')
    .innerText;

  navigator.clipboard.writeText(text).then(() => {
    const original = button.textContent;
    button.textContent = 'Copied!';
    setTimeout(() => {
      button.textContent = original;
    }, 1000);
  });
}
</script>
